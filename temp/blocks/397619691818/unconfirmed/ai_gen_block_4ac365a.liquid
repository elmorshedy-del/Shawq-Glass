{% doc %}
  @prompt
    Create an announcement bar message block with the following features:
    1. Auto-scrolling/scrolling animation for the message text
    2. Color scheme selector with ability to use color scheme 6
    3. Font size adjustment control (range slider 12px to 24px)
    4. Font family/type selector from available theme fonts
    5. Bold text formatting support in the message
    
    The block should be fully customizable in the theme editor with all these settings easily accessible., it is not following schema six cuz schema six has a css coded backround gradient , just allow a backround color and graadient that can be css in the announcement bar and remove color scheme , CAN U NAME THIS TO ANNOUNCEMENT BAR 1, NOW PUT THE COLOR SCHEMA IN IT , ALLOW THE CSS TO ACCEPT GRADIENTS, NOW PUT BACK THE SCHEMA WITHOUT CHANGING ANY OTHER CODE, ALLOW THE COLOR SCHEME TO OVERRIDE THE BACKROUND COLOR DONT CHANGE ANY OTHER CODE
{% enddoc %}
{% assign ai_gen_id = block.id | replace: '_', '' | downcase %}

{% style %}
  .ai-announcement-bar-{{ ai_gen_id }} {
    display: block;
    width: 100%;
    overflow: hidden;
    position: relative;
  }

  .ai-announcement-bar-wrapper-{{ ai_gen_id }} {
    width: 100%;
    padding: {{ block.settings.vertical_padding }}px 0;
  }

  .ai-announcement-bar-track-{{ ai_gen_id }} {
    display: flex;
    width: max-content;
    animation: ai-announcement-scroll-{{ ai_gen_id }} {{ block.settings.scroll_speed }}s linear infinite;
  }

  .ai-announcement-bar-message-{{ ai_gen_id }} {
    font-family: {{ block.settings.font_family.family }}, {{ block.settings.font_family.fallback_families }};
    font-weight: {{ block.settings.font_family.weight }};
    font-style: {{ block.settings.font_family.style }};
    font-size: {{ block.settings.font_size }}px;
    color: {{ block.settings.text_color }};
    {% if block.settings.bold_text %}
      font-weight: 700;
    {% endif %}
    white-space: nowrap;
    padding: 0 40px;
    margin: 0;
  }

  @keyframes ai-announcement-scroll-{{ ai_gen_id }} {
    0% {
      transform: translateX(0);
    }
    100% {
      transform: translateX(-50%);
    }
  }

  @media (prefers-reduced-motion: reduce) {
    .ai-announcement-bar-track-{{ ai_gen_id }} {
      animation: none;
    }
  }
{% endstyle %}

<announcement-bar-{{ ai_gen_id }}
  class="ai-announcement-bar-{{ ai_gen_id }} color-{{ block.settings.color_scheme }}"
  {{ block.shopify_attributes }}
>
  <div class="ai-announcement-bar-wrapper-{{ ai_gen_id }}">
    <div class="ai-announcement-bar-track-{{ ai_gen_id }}">
      {% for i in (1..10) %}
        <p class="ai-announcement-bar-message-{{ ai_gen_id }}">
          {{ block.settings.message }}
        </p>
      {% endfor %}
    </div>
  </div>
</announcement-bar-{{ ai_gen_id }}>

<script>
  (function() {
    class AnnouncementBar{{ ai_gen_id }} extends HTMLElement {
      constructor() {
        super();
      }

      connectedCallback() {
        this.track = this.querySelector('.ai-announcement-bar-track-{{ ai_gen_id }}');
        this.adjustScrollSpeed();
      }

      adjustScrollSpeed() {
        if (!this.track) return;
        
        const trackWidth = this.track.scrollWidth / 2;
        const speed = {{ block.settings.scroll_speed }};
        
        this.track.style.animationDuration = speed + 's';
      }
    }

    customElements.define('announcement-bar-{{ ai_gen_id }}', AnnouncementBar{{ ai_gen_id }});
  })();
</script>

{% schema %}
{
  "name": "Announcement bar 1",
  "tag": null,
  "settings": [
    {
      "type": "header",
      "content": "Message"
    },
    {
      "type": "inline_richtext",
      "id": "message",
      "label": "Message text",
      "default": "Welcome to our store • Free shipping on orders over $50 • Shop now"
    },
    {
      "type": "header",
      "content": "Colors"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color scheme",
      "default": "scheme-1"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background color",
      "default": "#000000"
    },
    {
      "type": "text",
      "id": "background_gradient",
      "label": "Background gradient",
      "info": "CSS gradient (e.g., linear-gradient(90deg, #ff0000, #0000ff)). Overrides background color if set."
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text color",
      "default": "#ffffff"
    },
    {
      "type": "header",
      "content": "Typography"
    },
    {
      "type": "font_picker",
      "id": "font_family",
      "label": "Font",
      "default": "helvetica_n4"
    },
    {
      "type": "range",
      "id": "font_size",
      "min": 12,
      "max": 24,
      "step": 1,
      "unit": "px",
      "label": "Font size",
      "default": 16
    },
    {
      "type": "checkbox",
      "id": "bold_text",
      "label": "Bold text",
      "default": false
    },
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "range",
      "id": "vertical_padding",
      "min": 8,
      "max": 32,
      "step": 2,
      "unit": "px",
      "label": "Vertical padding",
      "default": 12
    },
    {
      "type": "range",
      "id": "scroll_speed",
      "min": 10,
      "max": 60,
      "step": 5,
      "unit": "s",
      "label": "Scroll speed",
      "default": 30
    }
  ],
  "presets": [
    {
      "name": "Announcement bar 1"
    }
  ]
}
{% endschema %}
